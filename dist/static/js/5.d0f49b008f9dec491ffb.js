webpackJsonp([5],{D6r2:function(t,e,n){"use strict";(function(t){var a=n("mvHQ"),s=n.n(a);n("7+uW");e.a={name:"default",components:{},data:function(){return{logindata:{username:"xtkf001",password:"0",userSource:""},topWidth:"",topHeight:"",rememberpwd:!1,menuList:[]}},created:function(){},mounted:function(){t(window).resize(function(){this.topHeight=t(window).height()+"px",this.topWidth=t(window).width()+"px"}),this.topHeight=t(window).height()+"px",this.topWidth=t(window).width()+"px",localStorage.getItem("remember")&&(this.logindata=JSON.parse(localStorage.getItem("remember")),this.rememberpwd=!0)},methods:{login:function(){var t=this;this.$http.post(t.host("login")+"?username="+t.logindata.username+"&password="+t.logindata.password+"&userSource=PC").then(function(e){"ok"==e.data.state?this.$http.post(t.host("getUserInfo"),{}).then(function(e){"1"==e.data.state&&(t.util.logindata=e.data.results[0],this.changepwd(),console.log(t.util.logindata),t.$router.push("/home"),this.location.initWebSocket()),2==e.data.state&&t.$router.push("/")}).catch(function(t){console.log(t)}):t.$toast.center("fail.png",e.data.msg)}).catch(function(e){t.$toast.center("fail.png",e),console.log(e)})},changepwd:function(){this.rememberpwd?localStorage.setItem("remember",s()(this.logindata)):localStorage.removeItem("remember")},forgetPwd:function(){this.$toast.center("warn.png","请联系管理员")},allNav:function(t,e){var a=this;this.$http.post(a.host("menu/listByUser"),{pkUser:t}).then(function(t){a.menuList=[];var o=t.data;if("1"==t.data.state){var i=[];t.data.results.forEach(function(t,e){""!=t.pkParent&&null!=t.pkParent||i.push(t)}),0==e||-1==e?a.renderMenu(i,"0001A0100000000000UL",n("N4it"),n("jZJ2")):(a.renderMenu(i,"1001A0100000002QWJ0H",n("VruJ"),n("wlGW")),a.renderMenu(i,"0001A0100000000000UN",n("3oMv"),n("3scW")),a.renderMenu(i,"1001A0100000003AGT6H",n("uwy3"),n("Pdw0")),a.renderMenu(i,"1001A0100000002QWVCX",n("N7gt"),n("yxgi")),a.renderMenu(i,"1001A0100000002QX1J5",n("GflF"),n("RHPA")),a.renderMenu(i,"1001A0100000002QXBKQ",n("UTZl"),n("PUNM")),a.renderMenu(i,"0001A0100000000000UL",n("N4it"),n("jZJ2"))),sessionStorage.setItem("menuList",s()(a.menuList)),0==a.menuList.length?a.$toast.center("warn.png","未分配权限，请联系管理员"):(a.$router.push({path:a.menuList[0].to}),a.$toast.center("success.png","登录成功"))}else{var r={state:o.state,msg:o.msg};a.backLogin(r)}}).catch(function(t){a.$toast.center("fail.png","菜单获取异常")})},renderMenu:function(t,e,n,a){var s=this;t.forEach(function(t,o){t.pkMenu==e&&null!=t.htmlLink&&s.menuList.push({to:t.htmlLink,text:t.name,active:n,inactive:a})})},browserRedirect:function(){var t,e,n,a,s,o,i,r,l=(t=navigator.userAgent,e=/(?:Windows Phone)/.test(t),n=/(?:SymbianOS)/.test(t)||e,a=/(?:Android)/.test(t),s=/(?:Firefox)/.test(t),/(?:Chrome|CriOS)/.test(t),o=/(?:Mobile)/.test(t),i=/(?:iPad|PlayBook)/.test(t)||a&&!/(?:Mobile)/.test(t)||s&&/(?:Tablet)/.test(t),r=/(?:iPhone)/.test(t)&&!i,{isTablet:i,isPhone:r,isAndroid:a,isPc:!r&&!a&&!n,isMobile:o});l.isAndroid&&l.isMobile||l.isPhone?this.logindata.userSource="MOBILE":l.isTablet?this.logindata.userSource="PAD":l.isPc&&(this.logindata.userSource="PC")}}}}).call(e,n("7t+N"))},Luci:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("D6r2"),s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"log"},[a("div",{staticClass:"top",style:{height:t.topHeight,width:t.topWidth}},[a("img",{staticClass:"logo",attrs:{src:n("NW37")}}),t._v(" "),a("div",{staticClass:"login"},[a("span",{staticClass:"logText"},[t._v("胸痛中心管理平台")]),t._v(" "),a("div",{staticClass:"accountNumber"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.logindata.username,expression:"logindata.username"}],attrs:{id:"account",maxlength:"20",name:"username",type:"text",placeholder:"xtkf001"},domProps:{value:t.logindata.username},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.login(e):null},input:function(e){e.target.composing||t.$set(t.logindata,"username",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"passWord"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.logindata.password,expression:"logindata.password"}],attrs:{id:"passwords",maxlength:"20",name:"password",type:"password",placeholder:"0"},domProps:{value:t.logindata.password},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.login(e):null},input:function(e){e.target.composing||t.$set(t.logindata,"password",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"passwordForget"},[a("p",{staticClass:"checkbox",staticStyle:{"font-size":"14px",float:"left"}},[a("Checkbox",{model:{value:t.rememberpwd,callback:function(e){t.rememberpwd=e},expression:"rememberpwd"}},[t._v("记住密码")])],1)]),t._v(" "),a("div",{staticClass:"loginDiv"},[a("button",{staticClass:"loginButton",attrs:{type:"submit"},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.login(e):null},click:t.login}},[a("span",[t._v("登   录")])])])])])])},staticRenderFns:[]};var o=function(t){n("wQmT")},i=n("VU/8")(a.a,s,!1,o,"data-v-5f631bba",null);e.default=i.exports},wQmT:function(t,e){}});
//# sourceMappingURL=5.d0f49b008f9dec491ffb.js.map