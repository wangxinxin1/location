webpackJsonp([1],{"2e4x":function(t,e,i){"use strict";t.exports=function(t){var e=typeof t;return null!==t&&("object"===e||"function"===e)}},5341:function(t,e,i){"use strict";var a=i("2e4x"),n=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;function o(t,e,i){var s=e[i];if(void 0!==s&&null!==s){if(n.call(t,i)&&(void 0===t[i]||null===t[i]))throw new TypeError("Cannot convert undefined or null to object ("+i+")");n.call(t,i)&&a(s)?t[i]=l(Object(t[i]),e[i]):t[i]=s}}function l(t,e){if(t===e)return t;for(var i in e=Object(e))n.call(e,i)&&o(t,e,i);if(Object.getOwnPropertySymbols)for(var a=Object.getOwnPropertySymbols(e),l=0;l<a.length;l++)s.call(e,a[l])&&o(t,e,a[l]);return t}t.exports=function(t){t=function(t){if(null===t||void 0===t)throw new TypeError("Sources cannot be null or undefined");return Object(t)}(t);for(var e=1;e<arguments.length;e++)l(t,arguments[e]);return t}},"6jfZ":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("FDpj"),n={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"top"},[i("ul",{staticClass:"patInformation"},[i("li",[i("span",{staticClass:"patName"},[t._v(t._s(t.patientinfo.padPatInfoView.name))]),t._v(" "),i("span",{staticClass:"patGender"},[t._v(t._s(t.patientinfo.padPatInfoView.gender))]),t._v(" "),t.patientinfo.padPatInfoView.age_value?i("span",{staticClass:"patAge"},[t._v(t._s(t.patientinfo.padPatInfoView.age_value)+"岁")]):t._e()]),t._v(" "),i("li",[i("Button",{staticClass:"frameBtn",on:{click:t.cancelPro}},[t._v("取消任务")])],1)]),t._v(" "),i("div",{staticClass:"time"},[i("flatTimeaxis",{ref:"flattime",attrs:{width:t.timeWidth,timeaxisArr:t.flatTimeaxisArr,timeaxisProps:t.flatTimeaxisProps},on:{"flat-clicktime":t.flatClicktime,"flat-hintok":t.flatHintok}})],1)]),t._v(" "),i("div",{staticClass:"bottom",style:{marginTop:"10px",height:t.botHeight}},[i("router-view",{ref:"luyou",on:{"time-change":t.timeAxisChange}})],1),t._v(" "),i("div",{staticStyle:{background:"#fff","text-align":"center"}},[i("div",{staticClass:"versionBtn"},[i("Button",{staticClass:"button",attrs:{type:"primary",disabled:t.util.disabledFlag},on:{click:t.applicationRoom}},[t._v("申请导管室")]),t._v(" "),i("Button",{staticClass:"button",attrs:{type:"primary",disabled:t.util.disabledFlag}},[t._v("送达急诊科")]),t._v(" "),i("Button",{staticClass:"button",attrs:{type:"primary",disabled:t.util.disabledFlag},on:{click:t.saveAllPatientInfo}},[t._v("保存")]),t._v(" "),t.AidButton?i("Button",{staticClass:"button",attrs:{type:"primary",disabled:t.util.disabledFlag},on:{click:t.firstAddTip}},[t._v("完成急救")]):t._e()],1)]),t._v(" "),i("Modal",{attrs:{title:"提示","class-name":"vertical-center-modal",styles:{width:"400px",height:"200px"}},on:{"on-ok":t.firstAidOk,"on-cancel":t.cancel},model:{value:t.aidComplate,callback:function(e){t.aidComplate=e},expression:"aidComplate"}},[i("p",{staticStyle:{display:"inline-block",width:"100%","text-align":"center"}},[t._v("确定急救完成？")])]),t._v(" "),i("modal-dalog",{ref:"cancelTaskModal",attrs:{wid:t.cancelWid,dalogTitle:t.cancelTaskTitle},on:{"oktip-modal":t.cancelTaskModal}},[i("dialog-tips",{ref:"cancelTask",attrs:{slot:"dalogslot"},slot:"dalogslot"})],1),t._v(" "),i("modal-dalog",{ref:"applicationRoomModal",on:{"oktip-modal":t.applicationRoomModal}},[i("agree-tips",{attrs:{slot:"dalogslot"},slot:"dalogslot"})],1),t._v(" "),i("modal-dalog",{ref:"agreeTalkModal",attrs:{dalogTitle:t.agreeTalkTitle},on:{"oktip-modal":t.agreeTalkModal}},[i("agree2-tips",{attrs:{slot:"dalogslot"},slot:"dalogslot"})],1)],1)},staticRenderFns:[]};var s=function(t){i("xUz4")},o=i("VU/8")(a.a,n,!1,s,"data-v-f9ede5cc",null);e.default=o.exports},"7Ktq":function(t,e){},FDpj:function(t,e,i){"use strict";(function(t){var a=i("pFYg"),n=i.n(a),s=i("7+uW"),o=i("aHd8");s.default.component("dialog-tips",{template:'<div style="font-size:14px;color:#333;width:100%;height:195px;padding:10px;margin:auto;overflow: hidden"><p style="margin-bottom:10px;">确定要取消任务吗？</p><p>取消任务的原因:</p><textarea v-model="cancelResult" style="margin-top:8px;height:124px;width:100%;resize:none;border-radius:0;border:1px solid #bfcbe5;"></textarea></div>',data:function(){return{img:i("6vw/"),cancelResult:""}}}),s.default.component("agree-tips",{template:'<div style="width:100%;line-height:88px;height:88px;margin:auto;overflow: hidden"><p style="float:left;margin-left:100px;"><img style="width:40px;height:40px;margin:20px 10px 0 0;" :src=img /></p><p style="float:left">同意PCI手术吗?</p></div>',data:function(){return{img:i("6vw/")}}}),s.default.component("agree2-tips",{template:'<div class="clearfix" style="width:100%;height:88px;margin:auto;overflow: hidden"><p style="float:left;"><img style="width:40px;height:40px;margin:20px 10px 0 0;" :src=img /></p><p style="float:left;width:300px;margin-top:20px;">心电图诊断为STEMI阳性，同意谈话可提前启动导管室?</p></div>',data:function(){return{img:i("6vw/")}}}),e.a={name:"left-frame",components:{flatTimeaxis:o.a},data:function(){return{aidComplate:!1,AidButton:!1,botHeight:"200px",timeWidth:600,cancelTaskTitle:"取消任务",agreeTalkTitle:"同意谈话？",flatTimeaxisArr:[{data:"",datatime:"",timeevent:"发车时间",state:"1",isshow:!1},{data:"",datatime:"",timeevent:"到场时间",state:"1",isshow:!1},{data:"",datatime:"",timeevent:"首次医疗接触",state:"1",isshow:!1},{data:"",datatime:"",timeevent:"抽血时间",state:"1",isshow:!1,actualtime:"",qualitytime:"20分钟",exceedtargettime:"",timeoutCause:""},{data:"",datatime:"",timeevent:"首次药时间",state:"1",isshow:!1}],cancelWid:"530",flatTimeaxisProps:{data:{timeevent:"timeevent",state:"state",time:"datatime",data:"data",actualtime:"actualtime",qualitytime:"qualitytime",exceedtargettime:"exceedtargettime",timeoutCause:"timeoutCause"}}}},created:function(){var e=this;e.botHeight=t(window).height()-36-30-90-54+"px",t(window).resize(function(){e.botHeight=t(window).height()-36-30-90-54+"px"}),t(window).width()>1e3?e.timeWidth=700:e.timeWidth=600},mounted:function(){this.timeChange("start_car_time",0),this.timeChange("arrived_hospital_time",1),this.timeChange("first_mc_time",2),this.timeChange("sampling_time",3),this.timeChange("acs_delivery_time",4)},watch:{$route:function(t,e){"timeOverView"==this.$route.name?this.AidButton=!0:this.AidButton=!1}},methods:{firstAddTip:function(){this.aidComplate=!0},firstAidOk:function(){this.aidComplate=!1,this.firstAddPatientInfo(),clearInterval(this.location.timer),this.location.timer=""},cancel:function(){this.aidComplate=!1},timeAxisChange:function(t,e,i){t&&("object"==(void 0===t?"undefined":n()(t))&&(t=this.dateTime(t,19)),t=t.substr(11,5),this.$refs.flattime.changecolor(i,t))},timeChange:function(t,e){this.patientinfo.padTimeView[t]&&("object"==n()(this.patientinfo.padTimeView[t])&&(this.patientinfo.padTimeView[t]=this.dateTime(this.patientinfo.padTimeView[t],19)),this.flatTimeaxisArr[e].datatime=this.patientinfo.padTimeView[t].substr(11,5),this.$refs.flattime.changecolor(e,this.flatTimeaxisArr[e].datatime))},firstAddPatientInfo:function(){var t=this,e={pk_task:t.patientinfo.padPatInfoView.pk_task};""==e.pk_task?t.$toast.center("fail.png","未选择急救任务"):t.$http.post(t.host("task/changTaskStateComplete"),e).then(function(e){var i=e.data;"1"==i.state&&(t.$toast.center("success.png","保存"+i.msg),t.emityPatientInfo(),t.$router.push("/home"),t.menuActiveName="1-1",t.emityPatientInfo())}).catch(function(t){console.log(t)})},emityPatientInfo:function(){for(var t in this.patientinfo)for(var e in this.patientinfo[t])this.patientinfo[t][e]=""},flatClicktime:function(t){var e=this;if(e.util.disabledFlag)return!1;e.$http.post(e.host("public/systemTime"),{format:"yyyy-MM-dd HH:mm"}).then(function(i){var a=i.data;"1"==a.state&&(0==t[0]?(s.default.set(e.patientinfo.padTimeView,"start_car_time",a.results[0].systemTime),e.flatTimeaxisArr[t[0]].datatime=a.results[0].systemTime.substring(11),e.$refs.flattime.changecolor(t[0],t[1].datatime)):1==t[0]&&(s.default.set(e.patientinfo.padTimeView,"arrived_hospital_time",a.results[0].systemTime),e.flatTimeaxisArr[t[0]].datatime=a.results[0].systemTime.substring(11),e.$refs.flattime.changecolor(t[0],t[1].datatime)),2==t[0]&&(s.default.set(e.patientinfo.padTimeView,"first_mc_time",a.results[0].systemTime),e.flatTimeaxisArr[t[0]].datatime=a.results[0].systemTime.substring(11),e.$refs.flattime.changecolor(t[0],t[1].datatime)),3==t[0]&&(s.default.set(e.patientinfo.padTimeView,"sampling_time",a.results[0].systemTime),e.flatTimeaxisArr[t[0]].datatime=a.results[0].systemTime.substring(11),e.$refs.flattime.changecolor(t[0],t[1].datatime)),4==t[0]&&(s.default.set(e.patientinfo.padTimeView,"acs_delivery_time",a.results[0].systemTime),e.flatTimeaxisArr[t[0]].datatime=a.results[0].systemTime.substring(11),e.$refs.flattime.changecolor(t[0],t[1].datatime)))}).catch(function(t){console.log(t)})},haomianChangeTime:function(t){return t%36e5/6e4},flatHintok:function(t){this.patientinfo.padCheckInfoView.sampling_overtime_reason=t[0].timeoutCause},agreeCancel:function(){this.$refs.agreeCancel.openmodal()},cancelPro:function(){this.$refs.cancelTaskModal.openmodal()},cancelTaskModal:function(){var t=this,e={pk_task:t.patientinfo.padPatInfoView.pk_task,cancel_reason:t.$refs.cancelTask.cancelResult,ts:t.patientinfo.padPatInfoView.ts_task};t.$http.post(t.host("task/changTaskStateCannel"),e).then(function(e){var i=e.data,a={state:i.state,msg:i.msg};t.backLogin(a),"1"==i.state&&(t.$toast.center("success.png","取消"+i.msg),s.default.set(t.util,"menuActiveName","1-1"),t.$router.push({path:"home"}))}).catch(function(t){console.log(t)})},applicationRoom:function(){this.$refs.applicationRoomModal.openmodal()},applicationRoomModal:function(){this.$refs.agreeTalkModal.openmodal()},agreeTalkModal:function(){},format:function(t,e){var i=new Date(t),a=i.getMonth()+1,n=i.getDate();return a>=1&&a<=9&&(a="0"+a),n>=0&&n<=9&&(n="0"+n),isNaN(i.getFullYear())?t:i.getFullYear()+"-"+a+"-"+n+" "+i.getHours()+":"+i.getMinutes()},dateTime:function(t,e){if(10==e){if("object"==(void 0===t?"undefined":n()(t)))return t.getFullYear()+"-"+(t.getMonth()+1<=9?"0"+(t.getMonth()+1):t.getMonth()+1)+"-"+(t.getDate()<=9?"0"+t.getDate():t.getDate())}else if("object"==(void 0===t?"undefined":n()(t)))return t.getFullYear()+"-"+(t.getMonth()+1<=9?"0"+(t.getMonth()+1):t.getMonth()+1)+"-"+(t.getDate()<=9?"0"+t.getDate():t.getDate())+" "+(t.getHours()<=9?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()<=9?"0"+t.getMinutes():t.getMinutes())+":"+(t.getSeconds()<=9?"0"+t.getSeconds():t.getSeconds());return t},nullChangeVoid:function(t){for(var e in this.patientinfo[t])null==this.patientinfo[t][e]&&(this.patientinfo[t][e]="")},saveAllPatientInfo:function(){var t=this;for(var e in console.log(t.patientinfo.padDiaInfoView),t.patientinfo.padTimeView)null==t.patientinfo.padTimeView[e]&&(t.patientinfo.padTimeView[e]=""),"object"==n()(t.patientinfo.padTimeView[e])&&(t.patientinfo.padTimeView[e]=t.dateTime(t.patientinfo.padTimeView[e],19));for(var i in t.patientinfo.padDiaInfoView)null==t.patientinfo.padDiaInfoView[i]&&(t.patientinfo.padDiaInfoView[i]=""),"object"==n()(t.patientinfo.padDiaInfoView[i])&&(t.patientinfo.padDiaInfoView[i]=t.dateTime(t.patientinfo.padDiaInfoView[i],19));for(var a in t.patientinfo.padPatInfoView)if(null==t.patientinfo.padPatInfoView[a]&&(t.patientinfo.padPatInfoView[a]=""),"object"==n()(t.patientinfo.padPatInfoView[a])){if("birthday"==a){t.patientinfo.padPatInfoView[a]=t.dateTime(t.patientinfo.padPatInfoView[a],10);continue}t.patientinfo.padPatInfoView[a]=t.dateTime(t.patientinfo.padPatInfoView[a],19)}t.util.isBloodFlag?t.$http.post(t.host("task/saveTaskList"),t.patientinfo).then(function(e){var i=e.data,a={state:i.state,msg:i.msg};t.backLogin(a),"1"==i.state&&(t.$toast.center("success.png","保存"+i.msg),t.patientinfo=i.results[0],s.default.set(t.patientinfo,"padPatInfoView",i.results[0].padPatInfoView),s.default.set(t.patientinfo,"padCheckInfoView",i.results[0].padCheckInfoView),s.default.set(t.patientinfo,"padDiaInfoView",i.results[0].padDiaInfoView),s.default.set(t.patientinfo,"padTimeView",i.results[0].padTimeView),t.nullChangeVoid("padPatInfoView"),t.nullChangeVoid("padCheckInfoView"),t.nullChangeVoid("padDiaInfoView"),t.nullChangeVoid("padTimeView"))}).catch(function(t){console.log(t)}):t.$toast.center("warn.png",t.util.bloodMessage)},dateTimeDif:function(t,e,i,a,n){var o=new Date(t).getTime(),l=new Date(e).getTime();if(l-o>a){var r={data:"",datatime:"",timeevent:"抽血时间",state:"",isshow:!1,actualtime:"",qualitytime:"20分钟",exceedtargettime:"",timeoutCause:""};r.state="0",r.data=e,r.datatime=e.substr(11,5),r.timeoutCause=this.patientinfo.padCheckInfoView.sampling_overtime_reason,r.actualtime=Math.ceil(this.haomianChangeTime(l-o))+"分钟",r.exceedtargettime=Math.ceil(this.haomianChangeTime(l-o-a))+"分钟",this.$refs.flattime.hintSuspension(i,r,n),this.$refs.flattime.changecolor(i,r.datatime),s.default.set(this.patientinfo.padTimeView,"sampling_time",e),s.default.set(this.util,"warnFlag",!0)}else{var m={data:"",datatime:"",timeevent:"抽血时间",state:"1",isshow:!1,actualtime:"",qualitytime:"20分钟",exceedtargettime:"",timeoutCause:""};s.default.set(this.patientinfo.padTimeView,"sampling_time",e),m.datatime=e.substr(11,5),this.$refs.flattime.hintSuspension(i,m,n),this.$refs.flattime.changecolor(i,m.datatime),s.default.set(this.util,"warnFlag",!1)}}}}}).call(e,i("7t+N"))},aHd8:function(t,e,i){"use strict";var a=i("7+uW"),n=i("5341"),s={name:"flatTime",props:{timeaxisArr:{type:Array,default:null},timeaxisProps:{type:Object,default:null},flatstyle:{type:Object,default:null},width:{type:Number,default:500}},components:{},data:function(){return{flatTimeaxisArr:[],timeoutCause:"",setting:{data:{timeevent:"timeevent",state:"state",time:"time",data:"data",actualtime:"actualtime",qualitytime:"qualitytime",exceedtargettime:"exceedtargettime",timeoutCause:"timeoutCause"}},eventbox:85.7,overtime:!1,overtimeindex:""}},created:function(){},mounted:function(){this.inittimeAxis(this.timeaxisArr)},methods:{calculationWidth:function(){var t=this.flatTimeaxisArr.length+(this.flatTimeaxisArr.length-1)/2,e=this.width/t;this.eventbox=e<85.7?85.7:e>115?115:e},inittimeAxis:function(t){for(var e in console.log(t),this.flatTimeaxisArr=t,this.setting=n(this.setting,this.timeaxisProps),this.setting.data)if(e!=this.setting.data[e])for(var i=0;i<this.flatTimeaxisArr.length;i++)this.flatTimeaxisArr[i][e]=this.flatTimeaxisArr[i][this.setting.data[e]];this.calculationWidth()},clicktime:function(t){this.$emit("flat-clicktime",[t,this.flatTimeaxisArr[t]])},hintSuspension:function(t,e,i){console.log(e),a.default.set(this.flatTimeaxisArr,t,e),this.overtimeindex=t,this.overtime=i},changecolor:function(t,e){a.default.set(this.flatTimeaxisArr[t],"time",e),this.$forceUpdate()},save:function(t){this.overtime=!1,this.overtimeindex="",this.timeoutCause="",this.$emit("flat-hintok",[t,this.timeoutCause])},cancel:function(){this.overtime=!1,this.overtimeindex="",this.timeoutCause=""}}},o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flatTime"},t._l(t.flatTimeaxisArr,function(e,a){return i("div",{staticClass:"flatTime-box",style:{width:a!=t.flatTimeaxisArr.length-1?t.eventbox+t.eventbox/2+"px":t.eventbox+"px",height:t.eventbox+"px"}},[e.time?t._e():i("div",{staticClass:"flatTime-hang"},[i("div",{staticClass:"flatTime-eventbox",style:{width:t.eventbox+"px",height:t.eventbox+"px"},on:{click:function(e){t.clicktime(a)}}},[i("p",[t._v(t._s(e.timeevent))])]),t._v(" "),a!=t.flatTimeaxisArr.length-1?i("div",{staticClass:"flatTime-line",style:{width:t.eventbox/2+"px",top:t.eventbox/2+"px"}}):t._e()]),t._v(" "),e.time?i("div",{staticClass:"flatTime-finish"},[i("div",{class:0==e.state?"flatTime-overeventbox":"flatTime-eventbox",style:{width:t.eventbox+"px",height:t.eventbox+"px"},on:{click:function(e){t.clicktime(a)}}},[i("p",[t._v(t._s(e.timeevent))]),t._v(" "),i("p",[t._v(t._s(e.time))])]),t._v(" "),a!=t.flatTimeaxisArr.length-1?i("div",{staticClass:"flatTime-arrowline"},[i("div",{staticClass:"flatTime-line",style:{width:t.eventbox/2-3+"px",top:t.eventbox/2+"px"}}),t._v(" "),i("div",{staticClass:"flatTime-lineaxie",style:{left:t.eventbox+t.eventbox/2-3+"px",top:t.eventbox/2-2+"px"}})]):t._e()]):t._e(),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:a==t.overtimeindex&&0==e.state&&t.overtime,expression:"index==overtimeindex&&item.state==0&&overtime"}],staticClass:"flatTime-idalog",style:{left:t.eventbox*t.overtimeindex+"px",top:t.eventbox+10+"px"}},[i("div",{staticClass:"flatTime-arrow",style:{left:t.eventbox/2-10+"px",top:t.eventbox-10+"px"}}),t._v(" "),i("div",{staticClass:"flatTime-hintsuspen",style:{left:"-170px",top:t.eventbox+10+"px"}},[i("ul",{staticClass:"modelStyle clearfix"},[i("li",{staticStyle:{width:"100%"}},[t._v("抽血时间: "+t._s(e.data))]),t._v(" "),i("li",{staticStyle:{width:"100%"}},[t._v("首次医疗接触时间  "),i("span",{staticClass:"bgImg"},[t._v("至")]),t._v("  快速检测时间: "),i("span",{staticStyle:{"font-weight":"bold"}},[t._v("使用时长 "+t._s(e.actualtime))])]),t._v(" "),i("li",[t._v("质控时长:"+t._s(e.qualitytime))]),t._v(" "),i("li",{staticStyle:{"margin-bottom":"10px"}},[t._v("超过目标时间:"+t._s(e.exceedtargettime))]),t._v(" "),i("li",{staticStyle:{width:"100%",height:"88px","line-height":"normal","margin-bottom":"16px"}},[i("div",{staticStyle:{"padding-right":"10px",float:"left",height:"88px","line-height":"88px"}},[t._v("原因:")]),t._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.timeoutCause,expression:"item.timeoutCause"}],staticClass:"textarea",domProps:{value:e.timeoutCause},on:{input:function(i){i.target.composing||t.$set(e,"timeoutCause",i.target.value)}}})]),t._v(" "),i("li",{staticStyle:{"text-align":"center",width:"100%"}},[i("Button",{staticClass:"flatTime-btn",attrs:{type:"primary"},on:{click:function(i){t.save(e)}}},[t._v("确定")]),t._v(" "),i("Button",{staticClass:"flatTime-btn",staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:t.cancel}},[t._v("取消")])],1)])])])])}))},staticRenderFns:[]};var l=i("VU/8")(s,o,!1,function(t){i("7Ktq")},"data-v-51ffe6cc",null);e.a=l.exports},xUz4:function(t,e){}});
//# sourceMappingURL=1.8cf967619d496ec9cdeb.js.map